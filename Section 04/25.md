
# **25. Zod Schemas as Contracts for Outputs (Structured Outputs)**

> **Zod schemas act as a contract** between the LLM and your application, ensuring **safe, structured, and predictable outputs**.

---

## **What is Zod?**

**Zod** is a TypeScript-first schema validation library used to:

* Define data structure
* Validate runtime outputs
* Enforce types

ðŸ‘‰ In AI systems, Zod ensures the LLM **cannot break the expected format**.

---

## **Why Zod Schemas Are Needed**

LLMs generate **probabilistic text**, which can:

* Miss fields
* Change types
* Break JSON structure

Zod schemas:
âœ” Enforce required fields
âœ” Validate data types
âœ” Reject invalid outputs
âœ” Enable automatic retries

---

## **Zod as a Contract (Core Idea â­)**

> The LLM must respond in a format that **matches the schema**
> If it doesnâ€™t â†’ output is rejected

### Contract Example (Conceptual)

* App defines schema
* LLM must obey schema
* Runtime validates output

---

## **Structured Output Example**

### Zod Schema

```ts
const WeatherSchema = z.object({
  city: z.string(),
  temperature: z.number(),
  condition: z.string()
});
```

### Valid LLM Output

```json
{
  "city": "Delhi",
  "temperature": 32,
  "condition": "Sunny"
}
```

âŒ Missing or wrong type â†’ **validation fails**

---

## **Benefits in Agents (Exam â­)**

| Benefit     | Explanation            |
| ----------- | ---------------------- |
| Reliability | No broken JSON         |
| Safety      | No hallucinated fields |
| Automation  | Machine-readable       |
| Tool-ready  | Direct function calls  |

---

## **Zod in JSON-First Systems**

* Zod defines **what JSON must look like**
* LLM generates JSON
* System validates using Zod
* Retry or fail safely if invalid

---

## **Zod vs Plain JSON Output**

| Plain JSON    | Zod-Validated JSON   |
| ------------- | -------------------- |
| Trust-based   | Contract-based       |
| Error-prone   | Safe                 |
| Manual checks | Automatic validation |

---

## **Where Zod Is Commonly Used**

* Tool arguments validation
* Agent action outputs
* API responses
* LangChain structured output parsers

---

## **One-Line Exam Answer â­**

> Zod schemas act as contracts that enforce structured, validated outputs from LLMs, making agents reliable and production-safe.

---
